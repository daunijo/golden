[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Item", 
  "modified": "2018-09-19 16:07:49.418340", 
  "name": "Item-Client", 
  "script": "cur_frm.set_query(\"default_gudang\", function(frm) {\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 1,\n\t\t\t'type': 'Warehouse'\n\t\t}\n\t}\n});\ncur_frm.set_query(\"default_section\", function(frm) {\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 1,\n\t\t\t'type': 'Section',\n\t\t\t'parent': frm.doc.default_gudang\n\t\t}\n\t}\n});\ncur_frm.set_query(\"default_location\", function(frm) {\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 0,\n\t\t\t'type': 'Location'\n\t\t}\n\t}\n});\nfrappe.ui.form.on('Item', {\n\tonload: function(frm){\n\t},\n\titem_group: function(frm){\n\t\tif(frm.doc.item_group){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\targs:{\n\t\t\t\t\tdoctype: \"Item Group\",\n\t\t\t\t\tfilters:{\n\t\t\t\t\t\tname: frm.doc.item_group\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: function(data){\n\t\t\t\t\tfrm.set_value(\"default_location\", data.message.default_location);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tdefault_location: function(frm){\n\t\tfrm.set_value(\"default_warehouse\", frm.doc.default_location);\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: frm.doc.default_location\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrm.set_value(\"default_section\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t},\n\tdefault_section: function(frm){\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: frm.doc.default_section\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrm.set_value(\"default_gudang\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t}\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Warehouse", 
  "modified": "2018-09-20 13:39:06.170423", 
  "name": "Warehouse-Client", 
  "script": "frappe.ui.form.on('Warehouse', {\n\tsetup: function(frm){\n\t\tfrm.set_query(\"parent_section_rss\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t'is_group': 1,\n\t\t\t\t\t'type': 'Section'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tonload: function(frm){\n\t\tfrm.set_df_property(\"parent_warehouse\", \"read_only\", 1);\n\t\tfrm.set_df_property(\"parent_warehouse\", \"hidden\", 1);\n\t\tif(frm.doc.type == \"Location\"){\n\t\t\tfrm.set_df_property(\"parent_warehouse_rss\", \"read_only\", 1);\n\t\t}\n\t\tfrm.toggle_reqd(['parent_warehouse_rss', 'parent_section_rss'], false);\n\t},\n\tparent_section_rss: function(frm){\n\t\tif(frm.doc.parent_section_rss){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\targs:{\n\t\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\t\tfilters:{\n\t\t\t\t\t\tname: frm.doc.parent_section_rss\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: function(data){\n\t\t\t\t\tfrm.set_value(\"parent_warehouse_rss\", data.message.parent_warehouse);\n\t\t\t\t}\n\t\t\t});\n//\t\t}else{\n//\t\t\tfrm.set_value(\"parent_warehouse_rss\", undefined);\n\t\t}\n\t},\n\tparent_warehouse_rss: function(frm){\n\t\tif(frm.doc.type == \"Section\"){\n\t\t\tfrm.set_value(\"parent_warehouse\", frm.doc.parent_warehouse_rss);\n\t\t}\n\t},\n\ttype: function(frm){\n\t\tif(frm.doc.type == \"Section\"){\n\t\t\tfrm.set_value(\"parent_warehouse_rss\", undefined);\n\t\t\tfrm.set_value(\"parent_section_rss\", undefined);\n\t\t\tfrm.toggle_reqd('parent_warehouse_rss', true);\n\t\t\tfrm.toggle_reqd('parent_section_rss', false);\n\t\t\tfrm.set_df_property(\"parent_warehouse_rss\", \"read_only\", 0);\n\t\t\tfrm.refresh_fields();\n\t\t}else if(frm.doc.type == \"Location\"){\n\t\t\tfrm.toggle_reqd(['parent_warehouse_rss', 'parent_section_rss'], true);\n\t\t\tfrm.set_df_property(\"parent_warehouse_rss\", \"read_only\", 1);\n\t\t\tfrm.refresh_fields();\n\t\t}else{\n\t\t\tfrm.toggle_reqd(['parent_warehouse_rss', 'parent_section_rss'], false);\n\t\t}\n\t},\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2018-09-26 13:54:33.651459", 
  "name": "Sales Order-Client", 
  "script": "frappe.ui.form.on(\"Sales Order\", {\n\trefresh: function(frm){\n\t\t//frm.clear_custom_button(__('Invoice'));\n\t\t//cur_frm.page.get_inner_group_button(__(\"Invoice\")).find(\"button\").addClass(\"hide\");\n\t\tif(frm.doc.__islocal){\n\t\t\tfrm.set_value(\"golden_status\", \"Draft\");\n\t\t}\n\t\tvar df1 = frappe.meta.get_docfield(\"Sales Order Item\",\"ordered_qty\", cur_frm.doc.name);\n\t\tdf1.hidden = 1;\n\t\tvar df2 = frappe.meta.get_docfield(\"Sales Order Item\",\"delivered_qty\", cur_frm.doc.name);\n\t\tdf2.hidden = 1;\n\t\tvar df3 = frappe.meta.get_docfield(\"Sales Order Item\",\"billed_amt\", cur_frm.doc.name);\n\t\tdf3.hidden = 1;\n\t\tvar df4 = frappe.meta.get_docfield(\"Sales Order Item\",\"valuation_rate\", cur_frm.doc.name);\n\t\tdf4.hidden = 1;\n\t\tvar df5 = frappe.meta.get_docfield(\"Sales Order Item\",\"gross_profit\", cur_frm.doc.name);\n\t\tdf5.hidden = 1;\n\t},\n\tonload: function(frm){\n\t\tfrm.set_query('rss_warehouse', function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"is_group\": 1,\n\t\t\t\t\t\"type\": \"Warehouse\"\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"warehouse\", \"replenishment_warehouse\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t\"is_group\": 1,\n\t\t\t\t\t\"type\": \"Warehouse\"\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"rss_item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.stock.item_query\"\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"rss_sales_person\", function(doc) {\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.doctype.employee_settings.employee_settings.employee_query\",\n\t\t\t\tfilters: { 'department': 'sales' }\n\t\t\t}\n\t\t});\n\t},\n\tvalidate: function(frm){\n\t\tfrm.doc.title = frm.doc.customer\n\t},\n\tcustomer: function(frm){\n\t\tif(frm.doc.customer){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"Customer\",\n\t\t\t\t\tfilters:{\n\t\t\t\t\t\tname: frm.doc.customer,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: function (data) {\n\t\t\t\t\tif(data.message){\n\t\t\t\t\t\tfrm.set_value(\"rss_sales_person\", data.message.rss_sales_person);\n\t\t\t\t\t\tfrm.set_value(\"rss_sales_name\", data.message.rss_sales_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}else{\n\t\t\tfrm.set_value(\"rss_sales_person\", \"\");\n\t\t\tfrm.set_value(\"rss_sales_name\", \"\");\n\t\t}\n\t},\n\trss_sales_person: function(frm) {\n\t\tif(frm.doc.rss_sales_person){\n\t\t\tfrm.set_value(\"employee\", frm.doc.rss_sales_person);\n\t\t}else{\n\t\t\tfrm.set_value(\"employee\", \"\");\n\t\t}\n\t},\n\ttemplate_warehouse: function(frm) {\n\t\tif(frm.doc.template_warehouse){\n\t\t\tfrm.events.get_warehouse_from_template(frm);\n\t\t\tfrm.events.get_detail_template_warehouse(frm);\n\t\t}\n\t},\n\tget_warehouse_from_template: function(frm) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse Routing\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: frm.doc.template_warehouse\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrm.set_value(\"rss_warehouse\", data.message.warehouse);\n\t\t\t}\n\t\t});\n\t},\n\tget_detail_template_warehouse: function(frm) {\n\t\tfrm.clear_table(\"replenishment_warehouse\");\n\t\treturn frappe.call({\n\t\t\tmethod: 'golden.golden.doctype.warehouse_routing.warehouse_routing.get_template_warehouse',\n\t\t\targs: {\n\t\t\t\ttw: frm.doc.template_warehouse || undefined\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\t$.each(r.message, function(i, d) {\n\t\t\t\t\t\tvar c = frm.add_child(\"replenishment_warehouse\");\n\t\t\t\t\t\tc.warehouse = d.warehouse;\n\t\t\t\t\t})\n\t\t\t\t\tfrm.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n})\nfrappe.ui.form.on('Sales Order Item', {\n\trss_item_code: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", row.rss_item_code);\n\t},\n\titem_code: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Item\",\n\t\t\t\tname: row.item_code\n\t\t\t},\n\t\t\tcallback: function (data) {\n\t\t\t\tif(!row.rss_item_code){\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, \"rss_item_code\", data.message.item_code);\n\t\t\t\t}\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_gudang\", data.message.default_gudang);\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_section\", data.message.default_section);\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_location\", data.message.default_location);\n\t\t\t}\n\t\t})\n\t\tif(row.item_code){\n\t\t\tfrappe.call({\n\t\t\t\t\"method\" : \"golden.golden.stock.set_qty_stock\",\n\t\t\t\targs: {\n\t\t\t\t\tname: row.item_code\n\t\t\t\t},\n\t\t\t\tcallback: function(r){\n\t\t\t\t\tif(r.message) {\n\t\t\t\t\t\tfrappe.model.set_value(cdt, cdn, r.message);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\tdefault_location: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"warehouse\", row.default_location);\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: row.default_location\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_section\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t},\n\tdefault_section: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: row.default_section\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_gudang\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t}\n})\ncur_frm.set_query(\"default_gudang\", \"items\", function(doc, cdt, cdn) {\n\tvar d = locals[cdt][cdn];\n\treturn {\n\t\tfilters: [\n\t\t\t['is_group', '=', 1]\n\t\t]\n\t}\n});\ncur_frm.set_query(\"default_section\", \"items\", function (doc, cdt, cdn) {\n\tvar row = locals[cdt][cdn];\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 1,\n\t\t\t'type': 'Section',\n\t\t\t'parent': row.default_gudang\n\t\t}\n\t}\n});\ncur_frm.set_query(\"default_location\", \"items\", function (doc, cdt, cdn) {\n\tvar row = locals[cdt][cdn];\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 0,\n\t\t\t'type': 'Location',\n\t\t\t'parent': row.default_section\n\t\t}\n\t}\n});\ncur_frm.cscript['Make Packing'] = function() {\n\tfrappe.model.open_mapped_doc({\n\t\tmethod: \"golden.golden.stock.make_packing_list\",\n\t\tfrm: cur_frm\n\t})\n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Material Request", 
  "modified": "2018-02-10 20:09:49.855508", 
  "name": "Material Request-Client", 
  "script": "frappe.ui.form.on(\"Material Request\", {\n\tsetup: function(frm) {\n\t\tfrm.get_field('items').grid.editable_fields = [\n\t\t\t{fieldname: 'item_code', columns: 3},\n\t\t\t{fieldname: 'qty', columns: 1, width:66},\n\t\t\t{fieldname: 'uom', columns: 1},\n\t\t\t{fieldname: 'warehouse', columns: 2},\n\t\t\t{fieldname: 'schedule_date', columns: 1}\n\t\t];\n\t},\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2018-09-26 14:00:18.799711", 
  "name": "Sales Invoice-Client", 
  "script": "frappe.ui.form.on(\"Sales Invoice\", {\n\trefresh: function(frm){\n\t\tfrm.clear_custom_button();\n\t\tcur_frm.set_df_property(\"project\", \"read_only\", 1);\n\t\tcur_frm.set_df_property(\"is_pos\", \"hidden\", 1);\n\t\tcur_frm.set_df_property(\"update_stock\", \"hidden\", 1);\n\t\tvar df = frappe.meta.get_docfield(\"Sales Invoice Item\", \"barcode\", cur_frm.doc.name);\n\t\tdf.hidden = 1;\n\t\t//frm.refresh_fields();\n\t},\n\tonload: function(frm){\n\t\t//cur_frm.set_df_property(\"project\", \"read_only\", 1);\n\t\tfrm.set_query(\"rss_sales_order\", function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: [\n\t\t\t\t\t['golden_status', '=', 'Wait for Delivery and Bill'],\n\t\t\t\t\t['customer', '=', doc.customer],\n\t\t\t\t\t['status', '!=', 'Completed']\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"rss_sales_person\", function(doc) {\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.doctype.employee_settings.employee_settings.employee_query\",\n\t\t\t\tfilters: { 'department': 'sales' }\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"rss_item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.stock.item_query\"\n\t\t\t}\n\t\t});\n\t},\n\tvalidate: function(frm){\n/*\n\t\tif(frm.doc.rss_get_item_count == 0){\n\t\t\tmsgprint(\"You have not clicked 'Update Items'\");\n\t\t\tvalidated = false;\n\t\t}\n*/\n\t},\n/*\trss_get_items: function(frm){\n\t\tfrm.set_value(\"rss_get_item_count\", \"1\");\n\t\tvar tbl = frm.doc.items|| [];\n\t\tvar i = tbl.length;\n\t\twhile (i--) {\n\t\t\tif(frm.doc.items[i].sales_order != \"\"){\n\t\t\t\tfrm.set_value(\"rss_sales_order\", frm.doc.items[i].sales_order);\n\t\t\t}\n\t\t}\n\t\tfrm.events.items_from_delivery(frm);\n\t\tfrm.refresh_fields();\n\t},\n*/\n\trss_get_items: function(frm){\n\t\tfrm.clear_table(\"items\");\n\t\treturn frappe.call({\n\t\t\tmethod: 'golden.golden.selling.get_items_from_dn',\n\t\t\targs: {\n\t\t\t\tsales_order: frm.doc.rss_sales_order\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\t$.each(r.message, function(i, d) {\n\t\t\t\t\t\tvar c = frm.add_child(\"items\");\n\t\t\t\t\t\tc.rss_item_code = d.rss_item_code;\n\t\t\t\t\t\tc.item_code = d.item_code;\n\t\t\t\t\t\tc.item_name = d.item_name;\n\t\t\t\t\t\tc.description = d.description;\n\t\t\t\t\t\tc.image = d.image;\n\t\t\t\t\t\tc.qty = d.qty;\n\t\t\t\t\t\tc.stock_uom = d.stock_uom;\n\t\t\t\t\t\tc.uom = d.uom;\n\t\t\t\t\t\tc.conversion_factor = d.conversion_factor;\n\t\t\t\t\t\tc.stock_qty = d.stock_qty;\n\t\t\t\t\t\tc.price_list_rate = d.price_list_rate;\n\t\t\t\t\t\tc.base_price_list_rate = d.base_price_list_rate;\n\t\t\t\t\t\tc.margin_type = d.margin_type;\n\t\t\t\t\t\tc.discount_percentage = d.discount_percentage;\n\t\t\t\t\t\tc.rate = d.rate;\n\t\t\t\t\t\tc.amount = d.amount;\n\t\t\t\t\t\tc.base_rate = d.base_rate;\n\t\t\t\t\t\tc.base_amount = d.base_amount;\n\t\t\t\t\t\tc.net_rate = d.net_rate;\n\t\t\t\t\t\tc.net_amount = d.net_amount;\n\t\t\t\t\t\tc.base_net_rate = d.base_net_rate;\n\t\t\t\t\t\tc.base_net_amount = d.base_net_amount;\n\t\t\t\t\t\tc.income_account = d.income_account;\n\t\t\t\t\t\tc.expense_account = d.expense_account;\n\t\t\t\t\t\tc.warehouse = d.warehouse;\n\t\t\t\t\t\tc.sales_order = d.sales_order;\n\t\t\t\t\t\tc.so_detail = d.so_detail;\n\t\t\t\t\t\tc.delivery_note = d.delivery_note;\n\t\t\t\t\t\tc.dn_detail = d.dn_detail;\n\t\t\t\t\t})\n\t\t\t\t\tfrm.events.set_parents(frm);\n\t\t\t\t\tfrm.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tset_parents: function(frm){\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Sales Order\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: frm.doc.rss_sales_order,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function (data) {\n\t\t\t\tif(data.message){\n\t\t\t\t\tfrm.set_value(\"rss_sales_person\", data.message.rss_sales_person);\n\t\t\t\t\tfrm.set_value(\"rss_sales_name\", data.message.rss_sales_name);\n\t\t\t\t\tfrm.set_value(\"selling_price_list\", data.message.selling_price_list);\n\t\t\t\t\tfrm.set_value(\"employee\", data.message.rss_sales_person);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\trss_sales_person: function(frm) {\n\t\tif(frm.doc.rss_sales_person){\n\t\t\tfrm.set_value(\"employee\", frm.doc.rss_sales_person);\n\t\t}else{\n\t\t\tfrm.set_value(\"employee\", \"\");\n\t\t}\n\t},\n});\nfrappe.ui.form.on(\"Sales Invoice Item\", {\n\trss_item_code: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", row.rss_item_code);\n\t},\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Company", 
  "modified": "2018-08-07 09:48:41.694534", 
  "name": "Company-Client", 
  "script": "cur_frm.set_query(\"default_purchase_return_account\", function(frm) {\n\treturn {\n\t\tquery: \"erpnext.controllers.queries.get_expense_account\",\n\t}\n});\ncur_frm.set_query(\"default_selling_return_account\", function(frm) {\n\treturn {\n\t\tquery: \"erpnext.controllers.queries.get_expense_account\",\n\t}\n});\ncur_frm.set_query(\"default_sales_return_write_off_account\", function(frm) {\n\treturn {\n\t\tquery: \"erpnext.controllers.queries.get_expense_account\",\n\t}\n});\ncur_frm.set_query(\"default_return_warehouse\", function(frm) {\n\treturn {\n\t\tfilters: { 'type': 'Location' }\n\t}\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Stock Reconciliation", 
  "modified": "2018-06-21 09:53:35.254534", 
  "name": "Stock Reconciliation-Client", 
  "script": "cur_frm.set_query(\"default_gudang\", \"items\",  function (doc, cdt, cdn) {\n\tvar c_doc= locals[cdt][cdn];\n\treturn {\n\t//\tquery: \"golden.golden.stock.default_gudang\"\n\t\tfilters: {\n\t\t\t'is_group': 1,\n\t\t\t'type': 'Warehouse',\n\t\t\t'disabled': 0\n\t\t}\n\t}\n});\n/*\ncur_frm.set_query(\"default_section\", \"items\",  function (doc, cdt, cdn) {\n\tvar c_doc= locals[cdt][cdn];\n\treturn {\n\t\tfilters: {\n\t\t\t'is_group': 1,\n\t\t\t'type': 'Section',\n\t\t\t'parent': c_doc.default_gudang\n\t\t}\n\t}\n});\n*/\nfrappe.ui.form.on('Stock Reconciliation Item', {\n\tdefault_location: function(frm, cdt, cdn){\n\t\tvar d = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"warehouse\", d.default_location);\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: d.default_location\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_section\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t},\n\tdefault_section: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.client.get\",\n\t\t\targs:{\n\t\t\t\tdoctype: \"Warehouse\",\n\t\t\t\tfilters:{\n\t\t\t\t\tname: row.default_section\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallback: function(data){\n\t\t\t\tfrappe.model.set_value(cdt, cdn, \"default_gudang\", data.message.parent_warehouse);\n\t\t\t}\n\t\t});\n\t}\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Order", 
  "modified": "2018-05-21 20:13:44.752855", 
  "name": "Purchase Order-Client", 
  "script": "frappe.ui.form.on(\"Purchase Order\", {\n\tonload: function(frm){\n\t\tfrm.set_query(\"rss_item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.stock.item_query\"\n\t\t\t}\n\t\t});\n\t},\n\trefresh: function(frm){\n\t\tvar df1 = frappe.meta.get_docfield(\"Purchase Order Item\",\"item_name\", frm.doc.name);\n\t\tdf1.read_only = 1;\n\t},\n})\nfrappe.ui.form.on('Purchase Order Item', {\n\trss_item_code: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", row.rss_item_code);\n\t},\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Invoice", 
  "modified": "2018-09-20 17:13:05.498030", 
  "name": "Purchase Invoice-Client", 
  "script": "frappe.ui.form.on(\"Purchase Invoice\", {\n\tonload: function(frm){\n\t\tfrm.set_query('receive_order_1', function(doc) {\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.purchase.receive_order_query\",\n\t\t\t\tfilters: { 'supplier': doc.supplier }\n\t\t\t}\n\t\t});\n\t\tfrm.set_query('receive_order_2', function(doc) {\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.purchase.receive_order_query\",\n\t\t\t\tfilters: { 'supplier': doc.supplier }\n\t\t\t}\n\t\t});\n/*\n\t\tfrm.set_query(\"rss_item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.stock.item_query\"\n\t\t\t}\n\t\t});\n*/\n\t\tfrm.set_query(\"rss_item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t\tvar row = locals[cdt][cdn];\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.stock.pi_item_query\",\n\t\t\t\tfilters: { 'supplier': doc.supplier }\n\t\t\t}\n\t\t});\n\t},\n\trefresh: function(frm){\n\t\tfrm.clear_custom_button();\n\t//\tfrm.events.add_custom_button(frm);\n\t},\n\tnon_inventory_item: function(frm){\n\t//\tfrm.events.add_custom_button(frm);\n\t},\n\tmake_read_only: function(frm){\n\t\tvar df1 = frappe.meta.get_docfield(\"Purchase Order Item\",\"item_name\", frm.doc.name);\n\t\tdf1.read_only = 1;\n\t},\n\tadd_custom_button: function(frm){\n\t\tif((frm.doc.docstatus == 0 || frm.doc.__islocal) && frm.doc.supplier && !frm.doc.non_inventory_item){\n\t\tfrm.add_custom_button(__(\"Purchase Order\"), function() {\n\t\t\titems = $.map( cur_frm.doc.items, function(item,idx) { return item.purchase_order } )\n\t\t\tadded_items = items.join(\",\")\n\t\t\terpnext.utils.map_current_doc({\n\t\t\t\tmethod: \"erpnext.buying.doctype.purchase_order.purchase_order.make_purchase_invoice\",\n\t\t\t\tsource_doctype: \"Purchase Order\",\n\t\t\t\ttarget: frm,\n\t\t\t\tsetters: {\n\t\t\t\t\t//supplier: frm.doc.supplier || undefined,\n\t\t\t\t},\n\t\t\t\tget_query_filters: {\n\t\t\t\t\tdocstatus: 1,\n\t\t\t\t\tcompany: frm.doc.company,\n\t\t\t\t\tsupplier: frm.doc.supplier || None,\n\t\t\t\t\tstatus: \"To Bill\",\n\t\t\t\t\tname: [\"not in\", added_items]\n\t\t\t\t}\n\t\t\t})\n\t\t}, __(\"Get items from\"));\n\t\t}\n\t\tfrm.clear_custom_button();\n\t},\n\tget_receive_order_items: function(frm){\n\t\tif(frm.doc.receive_order_1 && frm.doc.receive_order_2){\n\t\t\tro = frm.doc.receive_order_1+\"||\"+frm.doc.receive_order_2\n\t\t}else if(frm.doc.receive_order_1 && !frm.doc.receive_order_2){\n\t\t\tro = frm.doc.receive_order_1\n\t\t}else if(!frm.doc.receive_order_1 && frm.doc.receive_order_2){\n\t\t\tro = frm.doc.receive_order_2\n\t\t}\n\t\tfrm.events.get_po_due_date(frm, ro);\n\t\tfrm.events.get_ro_items(frm, ro);\n\t},\n\tget_po_due_date: function(frm, ro){\n\t\treturn frappe.call({\n\t\t\tmethod: \"golden.golden.doctype.receive_order.receive_order.get_po_due_date\",\n\t\t\targs:{\n\t\t\t\tsupplier: frm.doc.supplier,\n\t\t\t\tro: ro,\n\t\t\t\tbased_on: frm.doc.due_date_base_on\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\tfrm.set_value(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\tget_ro_items: function(frm, ro){\n\t\tfrm.clear_table(\"items\");\n\t\treturn frappe.call({\n\t\t\tmethod: 'golden.golden.doctype.receive_order.receive_order.get_picking_items',\n\t\t\targs: {\n\t\t\t\tsupplier: frm.doc.supplier,\n\t\t\t\tro: ro\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\t$.each(r.message, function(i, d) {\n\t\t\t\t\t\tvar c = frm.add_child(\"items\");\n\t\t\t\t\t\tc.rss_item_code = d.item_code;\n\t\t\t\t\t\tc.item_code = d.item_code;\n\t\t\t\t\t\tc.item_name = d.item_name;\n\t\t\t\t\t\tc.description = d.description;\n\t\t\t\t\t\tc.qty = d.qty;\n\t\t\t\t\t\tc.uom = d.uom;\n\t\t\t\t\t\tc.stock_uom = d.stock_uom;\n\t\t\t\t\t\tc.rate = d.rate;\n\t\t\t\t\t\tc.purchase_order = d.purchase_order;\n\t\t\t\t\t\tc.warehouse = d.warehouse;\n\t\t\t\t\t\tc.amount = d.amount;\n\t\t\t\t\t\tc.po_detail = d.po_detail;\n\t\t\t\t\t\tc.receive_order = d.receive_order;\n\t\t\t\t\t\tc.receive_order_item = d.ro_detail;\n\t\t\t\t\t})\n\t\t\t\t\tfrm.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t},\n})\nfrappe.ui.form.on('Purchase Invoice Item', {\n\trss_item_code: function(frm, cdt, cdn){\n\t\trow = locals[cdt][cdn];\n\t\tfrappe.model.set_value(cdt, cdn, \"item_code\", row.rss_item_code);\n\t},\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2018-08-21 15:27:06.470688", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on('Customer', {\n\tsetup: function(frm){\n\t\tfrm.set_query('rss_city', function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: { 'disabled': 0 }\n\t\t\t}\n\t\t});\n\t\tfrm.set_query('rss_region', function(doc) {\n\t\t\treturn {\n\t\t\t\tfilters: {\n\t\t\t\t\t'disabled': 0,\n\t\t\t\t\t'city': doc.rss_city\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tfrm.set_query(\"rss_sales_person\", function(doc) {\n\t\t\treturn {\n\t\t\t\tquery: \"golden.golden.doctype.employee_settings.employee_settings.employee_query\",\n\t\t\t\tfilters: { 'department': 'sales' }\n\t\t\t}\n\t\t});\n\t},\n\trss_sales_person: function(frm){\n\t\tif(frm.doc.rss_sales_person){\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.get\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"Employee\",\n\t\t\t\t\tfilters:{\n\t\t\t\t\t\tname: frm.doc.rss_sales_person,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcallback: function (data) {\n\t\t\t\t\tif(data.message){\n\t\t\t\t\t\tfrm.set_value(\"rss_sales_name\", data.message.employee_name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}else{\n\t\t\tfrm.set_value(\"rss_sales_name\", \"\");\n\t\t}\n\t}\n})", 
  "script_type": "Client"
 }
]